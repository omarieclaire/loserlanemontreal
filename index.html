<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />

    <title>Loser Lane</title>
    <meta name="title" content="Loser Lane" />
    <meta
      name="description"
      content="Experience cycling between certain death and probable death in this totally accurate street survival simulator. Life without bike lanes? No thanks." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://omarieclaire.github.io/loserlanemontreal/" />
    <meta property="og:title" content="Loser Lane" />
    <meta
      property="og:description"
      content="Experience cycling between certain death and probable death in this totally accurate street survival simulator. Life without bike lanes? No thanks." />
    <meta property="og:image" content="https://omarieclaire.github.io/loserlanemontreal/img/ride.png" />

    <!-- Terrifying creature from the depths Card Tags  -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Loser Lane - Montreal Bike Survival Game" />
    <meta
      name="twitter:description"
      content="Experience cycling between certain death and probable death in this totally accurate street survival simulator. Life without bike lanes? No thanks." />
    <meta name="twitter:image" content="https://omarieclaire.github.io/loserlanemontreal/img/ride.png" />

    <link rel="me" href="https://mastodon.social/@omarieclaire" />

    <!-- Bluesky/AT Protocol -->
    <!--  currently use OpenGraph tags, but add these for future compatibility -->
    <meta property="bsky:title" content="Loser Lane - Montreal Bike Survival Game" />
    <meta
      property="bsky:description"
      content="Experience cycling between certain death and probable death in this totally accurate street survival simulator. Life without bike lanes? No thanks." />
    <meta property="bsky:image" content="https://omarieclaire.github.io/loserlanemontreal/img/ride.png" />

    <!-- General SEO Meta Tags -->
    <meta
      name="description"
      content="Experience cycling between certain death and probable death in this totally accurate street survival simulator. Life without bike lanes? No thanks." />
    <meta name="theme-color" content="#000000" />

    <!-- Image Specifications -->
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Loser Lane game preview showing a cyclist navigating through traffic" />

    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />

    <title>Loser Lane</title>
    <link rel="stylesheet" href="mainStyles.css" />

    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="translations.css" />

    <link rel="stylesheet" href="socialCard.css" />
    <link rel="stylesheet" href="tutorial.css" />
    <link rel="stylesheet" href="settings.css" />
    <!-- <script src="p5.serialport.js"></script> -->

    <script src="arduino-web-serial.js"></script>

    <script src="html2canvas.js"></script>
  </head>
  <body>
    <div id="game-container">
      <div id="game-screen"></div>
      <div id="arduino-status" style="display: none">Arduino Connected</div>
      <div class="lang-toggle-container" id="lang-toggle-container">
        <button class="lang-toggle" id="lang-toggle">FR</button>
      </div>
      <div class="mute-button-container">
        <button id="mute-button">
          <svg class="sound-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <!-- Speaker cone -->
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <!-- Sound waves -->
            <path class="sound-waves" d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            <path class="sound-waves" d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            <!-- Mute X (hidden by default) -->
            <line class="mute-x" x1="18" y1="6" x2="24" y2="12" stroke-width="2"></line>
            <line class="mute-x" x1="24" y1="6" x2="18" y2="12" stroke-width="2"></line>
          </svg>
        </button>
      </div>

    <div class="info-button-container">
  <button class="info-toggle" id="info-toggle" onclick="toggleInfo()">ℹ</button>
</div>

<div class="info-popup" id="info-popup">
  <button class="info-close" onclick="closeInfo()">×</button>
  <p><span data-i18n="infoText"></span> <a href="https://marieflanagan.com/about" target="_blank" rel="noopener">marieflanagan.com</a></p>
</div>

      <div id="pregame-msg-box">
        <div id="title-bike" class="bike-art-left bike-art-title">
          ⑀o <br />
          _(\&lt;_<br />
          ____(_)⍳(_)____
        </div>
        <div id="pregame-msg-title">LOSER LANE</div>
        <p id="tutorial-text"></p>
        <div id="main-msg-box"></div>

        <div class="tutorial-element-container">
          <div class="bike-direction-arrow left" id="bike-arrow-left"><--</div>
          <div class="bike-direction-arrow right" id="bike-arrow-right">--></div>

          <div id="tutorial-bike" class="bike-art-left bike-art-title">
            _|_<br />
            'o' <br />
            ⍵<br />
            |<br />
          </div>

          <!-- ⌆ -->

          <!-- <div class="title-box-container"> -->

          <!-- </div> -->
          <button id="start-button" aria-label="Start the game" data-i18n="ride">RIDE</button>
        </div>
      </div>

      <div id="controls">
        <div class="control-area" id="move-left"></div>
        <div class="control-area" id="move-right"></div>
        <div id="left-highlight" class="control-highlight left"></div>
        <div id="right-highlight" class="control-highlight right"></div>
      </div>

      <div id="game-info-container">
        <div id="game-info-box">
          <div id="game-title" data-i18n="gameTitle">LOSER∞LANE</div>

          <div id="game-score-box">
            <div class="bike-art-left">
              __o <br />
              _ \<_ <br />
              (_)/(_)
            </div>

            <div class="game-score">
              <div id="time-alive"><span data-i18n="stayAliveTimer">STAY ALIVE</span>: <span id="time-value">0</span></div>
            </div>

            <div class="bike-art-right">
              o__ <br />
              _ >/ _ <br />
              (_) \(_)
            </div>
          </div>
        </div>

        <p>
          <a href="building-generator.html" id="add-art-link" target="_blank" data-i18n="addBuilding">ADD A BUILDING?</a>
        </p>
      </div>

      <!--- Settings Panel HTML --->
      <div id="settings-window" class="settings-panel">
        <div class="settings-header">
          <h3>Game Settings</h3>

          <button id="close-settings" class="close-button">×</button>
        </div>

        <!-- Arduino Controls Section -->
        <div class="settings-section">
          <h4>Arduino Connection</h4>
          <div class="setting-group">
            <div class="setting-row">
              <button
                id="connect-arduino"
                style="padding: 10px; background: #4caf50; color: white; border: none; cursor: pointer; border-radius: 4px; width: 100%">
                Connect Arduino
              </button>
            </div>
          </div>
        </div>

        <!-- Debug Settings -->
        <div class="settings-section">
          <h4>Debug Options</h4>
          <div class="setting-group">
            <div class="setting-row checkbox-row">
              <label for="bike-invincible" class="tooltip-trigger">
                Invincibility
                <div class="tooltip">Makes bike immune to collisions</div>
              </label>
              <input type="checkbox" id="bike-invincible" />
              <span id="bike-invincible-value" class="value-display">Off</span>
            </div>

            <div class="setting-row checkbox-row">
              <label for="show-hitboxes" class="tooltip-trigger">
                Show Hitboxes
                <div class="tooltip">Visualize collision boundaries</div>
              </label>
              <input type="checkbox" id="show-hitboxes" />
              <span id="show-hitboxes-value" class="value-display">Off</span>
            </div>
          </div>
        </div>

        <!-- Core Game Speed -->
        <div class="settings-section">
          <h4>Core Game Speed</h4>
          <div class="setting-group">
            <div class="setting-row">
              <label for="world-scroll-speed" class="tooltip-trigger">
                Base Game Speed
                <div class="tooltip">Foundation of game speed - how fast the world moves past the bike</div>
              </label>
              <input id="world-scroll-speed" type="range" min="0.05" max="3.0" step="0.05" value="1.0" />
              <span id="world-scroll-speed-value" class="value-display">1.0</span>
            </div>

            <div class="setting-row">
              <label for="frame-update-rate" class="tooltip-trigger">
                Update Rate
                <div class="tooltip">How often game updates (16ms = 60fps, higher = slower)</div>
              </label>
              <input id="frame-update-rate" type="range" min="16" max="200" step="1" value="16" />
              <span id="frame-update-rate-value" class="value-display">16</span>
            </div>

            <div class="setting-row">
              <label for="speed-scaling-rate" class="tooltip-trigger">
                Speed Scaling
                <div class="tooltip">How quickly game accelerates (lower = faster acceleration)</div>
              </label>
              <input id="speed-scaling-rate" type="range" min="0.95" max="1.0" step="0.001" value="0.995" />
              <span id="speed-scaling-rate-value" class="value-display">0.995</span>
            </div>
          </div>
        </div>

        <!-- Entity Movement -->
        <div class="settings-section">
          <h4>Entity Movement</h4>
          <div class="setting-group">
            <div class="setting-row">
              <label for="oncoming-traffic-speed" class="tooltip-trigger">
                Oncoming Traffic Speed
                <div class="tooltip">Relative to world scroll (1.0 = same as world)</div>
              </label>
              <input id="oncoming-traffic-speed" type="range" min="0.5" max="5.0" step="0.1" value="1.0" />
              <span id="oncoming-traffic-speed-value" class="value-display">1.0</span>
            </div>

            <div class="setting-row">
              <label for="streetcar-speed" class="tooltip-trigger">
                Streetcar Speed
                <div class="tooltip">How fast streetcars move relative to world scroll</div>
              </label>
              <input id="streetcar-speed" type="range" min="0.5" max="3.0" step="0.1" value="1.0" />
              <span id="streetcar-speed-value" class="value-display">1.0</span>
            </div>

            <div class="setting-row">
              <label for="pedestrian-relative-speed" class="tooltip-trigger">
                Pedestrian Speed
                <div class="tooltip">How fast pedestrians move relative to world</div>
              </label>
              <input id="pedestrian-relative-speed" type="range" min="0.1" max="2.0" step="0.1" value="0.5" />
              <span id="pedestrian-relative-speed-value" class="value-display">0.5</span>
            </div>
          </div>
        </div>

        <!-- Traffic Density -->
        <div class="settings-section">
          <h4>Traffic Density</h4>
          <div class="setting-group">
            <div class="setting-row">
              <label for="global-density" class="tooltip-trigger">
                Global Density
                <div class="tooltip">Master multiplier for all spawn rates</div>
              </label>
              <input id="global-density" type="range" min="0.1" max="3.0" step="0.1" value="1.0" />
              <span id="global-density-value" class="value-display">1.0</span>
            </div>

            <div class="setting-row">
              <label for="streetcar-frequency" class="tooltip-trigger">
                Streetcar Frequency
                <div class="tooltip">How often streetcars spawn. Higher speeds need higher values</div>
              </label>
              <input id="streetcar-frequency" type="range" min="0.01" max="2.0" step="0.01" value="0.05" />
              <span id="streetcar-frequency-value" class="value-display">0.05</span>
            </div>

            <div class="setting-row">
              <label for="streetcar-lane-traffic-frequency" class="tooltip-trigger">
                Streetcar Lane Traffic
                <div class="tooltip">Frequency of vehicles in streetcar lane</div>
              </label>
              <input id="streetcar-lane-traffic-frequency" type="range" min="0.01" max="2.0" step="0.01" value="0.3" />
              <span id="streetcar-lane-traffic-frequency-value" class="value-display">0.3</span>
            </div>

            <div class="setting-row">
              <label for="oncoming-traffic-frequency" class="tooltip-trigger">
                Oncoming Traffic Rate
                <div class="tooltip">Frequency of oncoming vehicles</div>
              </label>
              <input id="oncoming-traffic-frequency" type="range" min="0.01" max="2.0" step="0.01" value="0.4" />
              <span id="oncoming-traffic-frequency-value" class="value-display">0.4</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const infoButton = document.getElementById("add-art-link");
    </script>
    <script src="translations.js"></script>

    <script src="buildings.js"></script>
    <script src="cuteDeathFaces.js"></script>
    <script src="colours.js"></script>
    <script src="assets.js"></script>
    <script src="sounds.js"></script>

    <script src="messages.js"></script>

    <script src="generateSocialCard.js"></script>
    <script src="settings.js"></script>
    <script src="arduino-serial.js"></script>

    <script src="loserlane.js"></script>
  </body>
</html>
